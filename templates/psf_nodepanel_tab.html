<script src="{{ url_for('ProteinStructureFetch.static', filename='js/psf_util.js') }}">
</script>
<link rel="stylesheet" href="{{ url_for('ProteinStructureFetch.static', filename='css/PsfStyle.css') }}">
</script>
<script>
    var sessiondata = JSON.parse({{ sessionData| tojson}});
    var settings = sessiondata.vrprot
</script>
<div id="tab_to_add" class="container" style="display:none;">
    <h2 class="lineglowslow" style="font-size: 68px;margin-bottom:30px;margin-top:30px">Settings</h2>
    <h6 style="font-size:25px;">Coloring mode:</h6>
    <div id="psf_colormode_selector">
        <select id="psf_mode">
            {% include "psf_color_modes.html" %}
        </select>
        <div class="twelve columns">
            <div id="psf_mode_update_message">
            </div>
        </div>
        <script>
            psf_settings_selectmenus("psf_mode", "/vrprot/changeMode?mode=", "psf_mode_update_message")
        </script>

    </div>
    <h6 style="font-size:25px;">AlphaFold DB version:</h6>
    <div id="psf_alphafold_selector">
        <select id="psf_alphafold_ver">
            {% include "psf_alphafold_versions.html" %}
        </select>
        <div class="twelve columns">
            <div id="psf_alphafold_ver_update_message">
            </div>
        </div>
        <script>
            psf_settings_selectmenus("psf_alphafold_ver", "/vrprot/changeAFVer?ver=", "psf_alphafold_ver_update_message")
            $("#psf_alphafold_ver").selectmenu("disable");
        </script>
    </div>
    <img id="tab_img" src="{{ url_for('static', filename='img/active_gears.png') }}" style="display: none;">
    <div class="twelve columns" style="margin-top: 20px;">
        <div class="frameBox three columns" id="psf_overwrite_framebox" style="min-height:66px;width:fit-content">
            <h6 style="font-size:25px;">Overwrite</h6>
        </div>
        <div class="frameBox one columns" id="psf_overwrite_checkbox_framebox"
            style="height: 88px;width: 88px;padding:20px"> <input type="checkbox" id="psf_overwrite"
                name="psf_overwrite" class="psf_checkbox">
        </div>
        <div class="ninecolumns">
        </div>
        <div class="twelve columns">
            <div id="psf_overwrite_message">
            </div>
        </div>
    </div>

    <script>
        psf_check_overwrite()
        $('#psf_overwrite').change(function() {
            var value = document.getElementById("psf_overwrite").checked;
            console.log(value)
            var addition = "/vrprot/settings/overwrite?value=" + value;
            sendAjax(addition, "psf_overwrite_message").done(function() {
                settings.overwrite = value
                console.log('ex', { id: "psf_overwrite", val: $('#psf_overwrite').is(":checked"), fn: "chk" })
                socket.emit('ex', { id: "psf_overwrite", val: $('#psf_overwrite').is(":checked"), fn: "chk" });
            }
            ).fail(function() {
                document.getElementById("psf_overwrite").checked = settings.overwrite;
            });
        });
        $("#psf_overwrite_framebox").click(function() {
            $("#psf_overwrite").trigger("click");
        });

    </script>


    {% if "UnrealEngine" in request.user_agent|string%}
    <!-- Larger dropdown items if in vr -->
    <script>
        psf_vr_selectmenu("psf_mode");
        psf_vr_selectmenu("psf_alphafold_ver");
    </script>
    {% endif %}
</div>